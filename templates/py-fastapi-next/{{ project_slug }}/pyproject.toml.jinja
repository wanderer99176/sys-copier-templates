[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "{{ project_slug }}-workspace"
version = "0.1.0"
description = "Next.js + FastAPI project managed by uv"
readme = "README.md"
requires-python = ">=3.12"
# [关键] 显式依赖后端包
dependencies = [
    "{{ package_name }}",
]

[tool.hatch.build.targets.wheel]
packages = ["src/{{ package_name }}"]

[tool.uv]
package = true

[tool.uv.workspace]
members = ["backend"]

# [关键] 告诉 uv 去 workspace 里找后端包
[tool.uv.sources]
"{{ package_name }}" = { workspace = true }

# --- Typos & Format 配置 ---
[tool.typos.default]
locale = "en"
[tool.typos.files]
extend-exclude = ["*.json", "*.lock", "uv.lock", "node_modules", ".venv", ".next"]

[tool.taplo]
include = ["pyproject.toml"]
exclude = ["uv.lock"]

[tool.pyright]
typeCheckingMode = "standard"
venvPath = "."
venv = ".venv"

[tool.ruff]
line-length = 88
target-version = "py312"
exclude = [".git", ".venv", "node_modules", ".next"]
